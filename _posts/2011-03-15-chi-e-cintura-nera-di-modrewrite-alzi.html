---
layout: post
title: Chi è cintura nera di (mod_)rewrite alzi la mano
date: '2011-03-15T12:49:00.000+01:00'
author: Luca Orlandi
tags:
- apache
modified_time: '2011-09-14T22:03:56.658+02:00'
blogger_id: tag:blogger.com,1999:blog-5600070.post-4459519518484171355
blogger_orig_url: http://lrkwz.blogspot.com/2011/03/chi-e-cintura-nera-di-modrewrite-alzi.html
---

L'url rewriting in generale è una tecnica molto importante per disaccoppiare gli url delle request e l'applicativo che sostiene un sito. Io utilizzo <a href="http://www.tuckey.org/urlrewrite/">tuckey</a> al livello di webapp e mod_rewrite a livello di http server.<br />Il modulo di rewrite di apache in particolare è un portento ma è un poco ostico da debuggare fintanto che non utilizzi<br /><br /><span style="font-family: Courier New,Courier,monospace;">&lt;</span><span class="kw3" style="font-family: Courier New,Courier,monospace;">IfModule</span><span style="font-family: Courier New,Courier,monospace;"> mod_rewrite.c&gt;</span><br /><span class="kw1" style="font-family: Courier New,Courier,monospace;">RewriteLog</span><span style="font-family: Courier New,Courier,monospace;"> </span><span class="st0" style="font-family: Courier New,Courier,monospace;">"logs/rewrite.log"</span><br /><span class="kw1" style="font-family: Courier New,Courier,monospace;">RewriteLogLevel</span><span style="font-family: Courier New,Courier,monospace;"> </span><span class="nu0" style="font-family: Courier New,Courier,monospace;">3</span><br /><span style="font-family: Courier New,Courier,monospace;"> <span class="kw3" style="font-family: Courier New,Courier,monospace;">IfModule</span><span style="font-family: Courier New,Courier,monospace;">&gt;</span> </span><br /><br />L'ultima rewrite che ho scritto serve a ridirigere il browser su un url che contiene esplicitamente il locale di navigazione in modo che i crawler (... si è sempre il seo a creare problemi ...) indicizzino correttamente per lingua:<br /><br /><span style="font-family: Courier New,Courier,monospace;">RewriteCond %{HTTP_COOKIE} locale=([^;]+) [NC]</span><br /><span style="font-family: Courier New,Courier,monospace;">RewriteRule ^/$ /site/%1 [R=301]</span><br /><br />Questa volta le fonti sono<br /><ol><li><a class="title" href="http://www.askapache.com/htaccess/htaccess-fresh.html" title="Fresh .htaccess Examples: Cookies, Variables, Custom Headers">Fresh .htaccess Examples: Cookies, Variables, Custom Headers</a></li><li>     <a href="http://www.latenightpc.com/blog/archives/2007/09/05/a-couple-ways-to-debug-mod_rewrite"><span class="hn2 title">A Couple Ways to Debug mod_rewrite</span></a> </li></ol>